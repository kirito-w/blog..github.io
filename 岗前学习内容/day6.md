# Day6
## Git:
----------------------------------------------------------------
### 常用操作：
- git status —— 查看当前提交状态
- git checkout 分支名 —— 切换到分支
- git checkout -b 分支名 —— 创建新的子分支并跳转到子分支
- git pull —— 拉取分支的最新代码，保证子分支的代码和远程主分支一致
- git diff 文件 —— 查看每个文件的修改内容
- git add .  —— 添加所有改动文件到暂存区
- git commit -m "BugFree111 tl xxxx" —— 代码提交到本地仓库
- git push 分支名 —— 把子分支的代码推送到远程仓库
- git log —— 查看提交记录
- git pull --rebase origin  —— rebase主分支
- git rebase --continue; 让 rebase 过程继续执行。
- git rebase --abort; 发生代码冲突后，放弃合并，回到操作前的样子。

----------------------------------------------------------------

### 前置知识：
- 什么是冲突：
    - 合并的时候，有可能会产生冲突。
    - `冲突的产生是因为在合并的时候，不同分支修改了相同的位置`。
    - 需要`手动`选择想要保留的内容，从而`解决冲突`。
- git pull和git pull --rebase区别：
    - git pull做了两个操作分别是`‘获取’和合并`。所以`加了rebase`就是`以rebase的方式进行合并分支`得到`一条干净的分支流`。
    - `git pull = git fetch + git merge FETCH_HEAD`
    - `git pull --rebase =  git fetch + git rebase FETCH_HEAD`  

----------------------------------------------------------------

### 场景分支说明：
- 平台：windows平台
- 主分支：release-operator-v1.0-IPQ5018-WiFi6-Route-ANDLINK
- 自己的分支：release-operator-v1.0-IPQ5018-WiFi6-Route-ANDLINK-name 

### `提交代码流程`：
- 1、把代码构建完成后，右键代码目录，点击Git Bash Here：  
![](img/%E5%9B%BE%E7%89%8730.png)
- 2、输入 git status 查看当前提交状态；
- 3、git diff 查看每个文件的修改内容，确认都是自己要改的；
    - git diff apps/adaptor/files/ledswitch 这个文件我不需要更改
    - git checkout apps/adaptor/files/ledswitch 取消掉这个文件更改
- 4、确认都是要提交的之后，git add .
- 5、git commit -m "bug234234: 更改内容说明"
- 6、git log 查看提交记录 
- 7、打开git网站 https://gitlab.com/TenbayGateway/ 查看主分支和自己的分支是不是在同一个直线上，如果不是，则需要rebase一下主分支：  
![](img/%E5%9B%BE%E7%89%8731.png)
- 8、rebase一下主分支：git pull --rebase origin release-operator-v1.0-IPQ5018-WiFi6-Route-ANDLINK
- 9、推到远端代码库：git push origin release-operator-v1.0-IPQ5018-WiFi6-Route-ANDLINK-name
- 10、发现有报错，说明远端的和本地的不一致，这时候就要注意了，`确认好自己远端的代码是不需要的了`，就`可以强推到自己的分支`,一定要`看清楚是自己的分支`，自己的分支:
    - git push origin release-operator-v1.0-IPQ5018-WiFi6-Route-ANDLINK-name -f
- 11、再打开git网站 https://gitlab.com/TenbayGateway/ 查看主分支和自己的分支是不是在同一个直线上，是在同一个直线上就OK了


### `rebase合并以及冲突解决`：
- 1、当你修改完代码提交
- 2、查看日志
- 3、`git  pull --rebase origin 主分支`， 拉主分支时`出现冲突`的时候，如下:  
![](img/%E5%9B%BE%E7%89%8732.png)
- 4、先 git status 查看提交状态，这里显示both modified:  
 ![](img/%E5%9B%BE%E7%89%8733.png)
 apps/adaptor/src/main.lua这个文件存在冲突。
- 5、我们打开这个文件，如果文件较多，`在vscode中搜<<<<`,便会显现出来  
![](img/%E5%9B%BE%E7%89%8734.png)  
![](img/%E5%9B%BE%E7%89%8735.png)
- 6、改成想要的样子即可，然后`保存文件`，回到git界面，进行`git add .`。
- 7、然后执行 git rebase --continue 就处理完一个冲突了，当前也只有一个冲突需要解决。
- 8、查看日志 git log

### `merge合并以及冲突解决`:
- 1、当你修改完代码提交
- 2、然后 `git pull origin 主分支`， 拉主分支时`出现冲突`的时候，如下:  
![](img/%E5%9B%BE%E7%89%8736.png)
- 3、首先git status 查看一下，这里显示both modified:   apps/adaptor/src/main.lua这个文件存在冲突。  
![](img/%E5%9B%BE%E7%89%8737.png)
- 4、我们打开这个文件，如果文件较多，在vscode中搜<<<<,便会显现出来  
![](img/%E5%9B%BE%E7%89%8738.png)
- 5、改成想要的样子即可，然后保存文件，回到git界面，进行git add .  
![](img/%E5%9B%BE%E7%89%8739.png)  
![](img/%E5%9B%BE%E7%89%8740.png)
- 6、然后执行 `git commit -m "冲突提交说明"` 就处理完一个冲突了，当前也只有一个冲突需要解决。`或者`也可以执行 `git merge --continue` ，会弹出个页面来让你`补充更改提交说明`。  
![](img/%E5%9B%BE%E7%89%8741.png)
- 7、merge 和 rebase 的区别是，`merge需要多提交一份冲突解决步骤和说明`。

----------------------------------------------------------------

### rebase和merge的区别及使用场景：
#### 区别：
- 相同点：
    - merge和rebase`都是用来合并分支`的。
- 不同点：
    - 合并前：  
    ![](img/%E5%9B%BE%E7%89%8742.png)
    - 合并时：
        - merge：将`在子分支的所有提交`记录成`一次commit`，保留在记录中。  
        ![](img/%E5%9B%BE%E7%89%8743.png)
        - rebase：`不会保留commit记录`，直接`将分支中的内容`排到`master`的记录`之后`。  
        ![](img/%E5%9B%BE%E7%89%8744.png)
- 简单总结:
    - `merge`就是将自己版本`合并到master分支下`。`rebase`就是`覆盖`的操作。
    - `merge`具有`更高的可追溯性`，而`rebase`则`更整洁`且`易于审核`。

#### 使用场景：
- 场景一:
    - `一直在某个子分支`开发功能。你`还没开发完`，然后你的同事告诉你，你`引用的其他模块`的内容`有更新`，你需要`拉取`一下`最新的master代码`更新一下该模块。
    - `推荐使用rebase`。该`模块的内容更新和你功能无关`，`合并代码`也`不会影响你的功能`，`无需保留该记录`。如果使用merge，在开发周期长的情况下，会创造很多无用的commit记录。
- 场景二:
    - 你和同事`两个人在开发同一个模块`，你`同事`开发的`部分功能已经合并`到了master，通知你`更新一下最新的模块代码`。
    - `推荐使用merge`。你和同事`开发的是同一模块`，很`可能他的某个改动会导致你的功能出问题`，如果出了问题，`保留记录能便于后期排查问题`。（如果从逻辑上可以判断不会有影响，那么使用rebase也可以）
- 场景三:
    - 现在有个`子分支模块已经开发完`，`master分支`需要`将这个分支的内容合并`进来。
    - `推荐使用merge`。使用merge可以留有提交记录，如果`该模块出了问题`，`方便`后面`排查`问题。

#### `注意点（重要！！！！！！！）`:
- 假如使用rebase，一定要遵守rebase黄金法则，`共享的public分支不能rebase`
- `当一个分支是一个人开发处理的，才可以rebase!!`，假如一个分支被多个人共享开发，然后rebase，那就乱套了，处理起来复杂；

#### 总结：

- 当您进行`merge`操作时，Git将两个分支的更改`合并到一个新的合并提交`中。这个合并提交将`包含两个分支的更改`，并`形成一个新的分支历史记录`。在这种情况下，回溯将跳转到先前的合并提交，以查看合并后的状态。

- 而当您进行`rebase`操作时，Git将在另一个分支（通常是主分支）上`重新应用当前分支的提交`。这将使得当前分支的提交历史记录与目标分支的`提交历史记录合并`。回溯将跳转到先前的提交，包括重新应用过的提交。

- 从回溯的角度来看，`merge操作的提交历史记录可能更清晰`，因为它会创建一个合并提交来汇总更改。而`rebase操作可能会重写提交历史记录`，使其`线性化`，并将更改直接应用到目标分支。因此，根据您的具体需求和个人偏好，选择merge或rebase操作会导致稍微不同的回溯结果。


================================================================

## 带宽（网络带宽）与信道、协议之间的关系：

----------------------------------------------------------------
### 概念：
- 首先，`带宽是衡量网络传输速率的重要指标`，它表示单位时间内网络传输的数据量。`通常情况下，网络的带宽越高，数据传输速率就越快`。
- 其次，`信道是指在网络中传输数据的物理媒介`，例如`光纤、无线电波`等。一个信道可以支持一定带宽的数据传输。`同一个信道可以被多个协议和应用程序共享，但是不同的协议和应用程序可能需要不同的带宽`。
- 最后，协议定义了网络中`数据传输的规则和格式`，它们负责控制和管理数据的传输。在网络中有很多种不同的协议，包括 TCP/IP、HTTP、FTP 等等。`不同的协议使用不同的信道和带宽`，通过对网络资源的管理和调度，来保证数据传输的顺畅和高效。
- 因此，在设计和管理网络时，需要`综合考虑信道、协议和带宽三者之间的关系`，选择合适的信道、协议和带宽结合在一起，以达到`网络性能的最优化`。

----------------------------------------------------------------
### 相互间的关系：
- 协议可以影响数据的传输效率和网络的利用率。`不同的协议对带宽的利用效率不同`，某些协议可能会占用更多的带宽，而某些协议可能会更高效地利用带宽。同时，`带宽的大小也会影响协议的传输速度和表现`。较高的带宽通常可以支持更快的数据传输速度和更大的数据流量。
- 协议`决定`了`数据`在`信道中`的`传输方式和处理方式`。`不同的协议会根据信道的特性和限制来选择合适的传输方式`，以`确保数据的可靠传输`的能力。
- `信道的带宽决定了在该信道上能够传输的数据量的上限`。较高的带宽意味着更多的数据可以在单位时间内传输，从而提供更快的传输速度和更大的数据流量。相反，较低的带宽会限制数据的传输速度和流量。然而，带宽并不完全等同于信道的物理能力。带宽还受到其他因素的影响，如网络拥塞、信号干扰等。这些因素可能导致实际的传输速度低于信道的理论带宽。

----------------------------------------------------------------

### 决定传输速度因素的占比：
- 决定数据传输速度的因素中，带宽通常被认为是最重要的因素，因为它`直接影响了网络传输的能力`。较高的带宽`可以支持更多的数据传输`，从而提高传输速度和流量。
- `一些高效的协议可以更有效地利用带宽，提高传输速度`。
- 而信道的`特性和限制`也会影响数据传输速度。不同的信道具有不同的传输特性，例如`有线信道`通常具有`较高的带宽和稳定性`，而`无线信道`受到`信号干扰、距离限制`等因素的影响，`传输速度`可能`较低`。

----------------------------------------------------------------
### 如何通过带宽，选择合适的协议和信道？(重要！！！)
- 1、理解`带宽需求`：首先，需要`明确数据传输的需求`，即需要传输多少数据量以及所需的传输速度。根据需求来确定所需的带宽大小。
- 2、了解`协议的特性`：`不同的协议具有不同的传输效率和开销`。了解各种协议的特性，如TCP、UDP、HTTP等，以及它们在不同带宽条件下的表现。
- 3、考虑`协议的适应性`：选择适应当前带宽的协议。`某些协议可能对低带宽情况更有效`，而`其他协议可能更适用于高带宽环境`。`选择`一个`能够最大限度地利用当前带宽`的`协议`。
- 4、了解`信道特性`：了解所使用的信道的特性和限制，包括`有线信道和无线信道的带宽、稳定性、距离限制、信号干扰`等。这些特性会影响数据传输的速度和质量。
- 5、选择`合适的信道类型`：根据`需求和信道的特性`选择合适的信道类型，如有线信道（如以太网、光纤）或无线信道（如Wi-Fi、蓝牙）。`有线信道通`常具有`较高的带宽和稳定性`，而`无线信道`具有`更大的灵活性和便利性`。
- 6、考虑`信道优化`：对于`无线信道`，采取一些优化措施，如`使用更高频率的无线频段`、使用`信号增强器`或`中继器`来`增强信号强度`，以提高传输速度和质量。

----------------------------------------------------------------

### 应该先决定协议还是先决定信道？(重要！！！)
- 在选择协议和信道的顺序上，通常建议`先决定协议`，然后`再选择`合适的`信道`。
- 选择协议是非常重要的，因为`协议规定了数据传输的格式、顺序、错误处理`等规则，`直接影响`数据传输的`效率和速度`。
- 一旦选择了适合的协议，再来选择合适的信道。信道是数据在网络中传输的通道或路径，不同的信道具有不同的传输特性和限制。
- `根据协议的要求和实际的网络环境`，选择适合的信道类型，如有线信道（如以太网、光纤）或无线信道（如Wi-Fi、蓝牙）。了解信道的特性和限制，可以根据需求选择具有足够带宽和稳定性的信道。


================================================================

## 信道，协议和带宽之间的关系？
- 频段：将频率分为多段，如2.4G(2401~2423Mhz)/5G(6Ghz以下)。
- 信道：将频段分为多个信道，信道主要是用于`传输无线电波信号的通道`。
- 信道带宽：
    - 一个信道中`最大频率与最小频率的差`，就叫做信道带宽，这个值`体现了`信道`覆盖的频率范围的大小`。
    - `带宽越大`(常见20/40/80/160)，数据`传输速率越大`。
- 网络带宽：
    - 计算机网络中传输数据的能力和速率。
- `不同的协议(重要！！！)`：
![](img/%E5%9B%BE%E7%89%8727.png)

================================================================


## DNSmasq(待实操):
### DNSmasq是什么？
- DNSmasq是一种常用的域名系统（DNS）代理软件,它可以将网络上的域名解析请求转发至另一个DNS服务器处理，也可以自主解析特定的本地域名。常见于小型网络或者家庭环境内，DNSmasq还能够同时充当DHCP服务器，为设备分配IP地址。它的优点是轻量级、易于安装和配置，适用于资源受限的设备或者系统。如果你需要在你的网络环境中管理DNS解析和DHCP分配，DNSmasq可能是一个不错的选择。

----------------------------------------------------------------

### 如何学习DNSmasq？
- https://blog.51cto.com/u_15069485/2612821
- https://blog.51cto.com/u_15069485/2612822
- https://www.bilibili.com/read/cv20000918/
- https://blog.csdn.net/qq_35002542/article/details/128655553
- https://www.jianshu.com/p/b9ff2ee98cae
- 学习DNSmasq需要有一定的网络基础和Linux操作系统的基础。下面是一些学习DNSmasq的方法：

    - 1.了解DNS和DHCP的基础知识。DNS和DHCP是DNSmasq的两个重要功能，理解它们的原理对于学习DNSmasq非常有帮助。

    - 2.安装和配置DNSmasq。在Linux系统中，可以使用包管理器安装DNSmasq，或者从官方网站上下载编译安装。安装完成后，需要对DNSmasq进行一些基本的配置，例如设置监听的网络接口、指定上游DNS服务器等。

    - 3.熟悉DNSmasq的配置文件。DNSmasq的主配置文件是/etc/dnsmasq.conf，该文件中定义了DNSmasq的各项设置，例如本地域名解析、DHCP分配设置、DNS转发等等。熟悉配置文件的格式和各个选项的含义对于使用DNSmasq非常有必要。

    - 4.实践和调试。在完成了DNSmasq的基础配置后，可以测试DNSmasq的域名解析、DHCP等功能是否正常。如果遇到问题，可以查看DNSmasq的日志文件，从中找到问题所在并进行排除。

    - 5.参考文档和教程。在学习过程中，可以参考DNSmasq的官方文档和各种博客和论坛中的教程，获取更多有关DNSmasq的知识和技巧。

================================================================

## 路由器的桥模式是什么？
- 在路由器上，桥模式也称为透明桥模式，它是一种`在物理层（使用MAC地址）`将`两个局域网`进行`连接`的方式。
- 在桥接模式下，路由器的两个网口会被直接连通起来（相当于虚拟出了一个网桥），同时也可以将多个设备接入同一网络，`实现局域网之间互相通信`。
- 桥接模式相比于路由模式，可以`避免NAT转换、重复地址`等问题，特别是在一些`需要共享网络的情况下非常适用`。
- 但是需要注意的是使用桥接模式时，`需要确保网络中的设备符合同一局域网的前提条件`，否则可能造成网络问题。


================================================================

## 代码管理规范：
- 1.c/c++代码规范
    - 编写c/c++代码时，可参考《google c/c++编码规范》：
        - [中文版](https://zh-google-styleguide.readthedocs.io/en/latest/)
        - 检查工具：tscancode
- 2.js代码规范
    - 编写js代码时，可参考以下两份文档，并可使用代码检查工具JSLINT来进行初步代码检查，避免低级问题。
        - [Flex node-style-guide](https://github.com/dead-horse/node-style-guide)
        - [Google node-style-guide](https://google.github.io/styleguide/jsguide.html)
- 3.go代码规范
    - 编写go代码时，可参考以下两份文档，并可使用代码检查工具golangci-lint来进行初步代码检查，避免低级问题。
        - [CodeReviewComments](https://github.com/golang/go/wiki/CodeReviewComments)
        - [Effective Go](https://golang.org/doc/effective_go.html)

- 4.lua代码规范
    - 规范：参考附件《lua编码规范V5》.
    - 检查工具：luacheck 或 tscancode

================================================================


================================================================

### 待解决：
- 如何抓取带有续租请求的DHCP包？
- linux使用DNSmasq部署DNS和DHCP，这两个用的是同一个配置文件，那如何两个都有呢?
- 日志查看